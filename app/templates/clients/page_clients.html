{% extends "base.html" %}

{% block title_url %}Clients / Fournisseurs{% endblock %}
{% block title_page %}Clients / Fournisseurs{% endblock %}

{% block content %}
    <div class="d-flex flex-column gap-2">
        <a class="btn btn-primary flex-grow-1" href="{% url 'main:add_client' %}">Enregistrer un nouveau client</a>
    </div>
    <div class="card mt-2">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Client / Fournisseur</th>
                <th>Nb. Transactions</th>
                <th>Total ventes (€)</th>
                <th style="width: 5em">Editer</th>
                <th style="width: 5em">Rapport</th>
            </tr>
            </thead>
            <tbody>
                {% for client in clients %}
                    <tr>
                        <td>{{ client.name }}</td>
                        <td>{{ client.surname }}</td>
                        <td>{{ client.type }}</td>
                        <td>{{ client.transaction_count }}</td>
                        <td>{{ client.total_vente }}</td>
                        <td>
                            <a href="{% url 'main:edit_client' client.id %}" class="btn btn-warning btn-sm">✏️</a>
                        </td>
                        <td>
                            <a href="{% url 'main:client_pdf_report' client.id %}" class="btn btn-success btn-sm">📄</a>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5" class="text-center">Aucun client enregistré</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}